<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/ui-lightness/jquery-ui.css" rel="stylesheet" type="text/css" />
    <link href="https://code.jquery.com/jquery-3.5.1.js"></script>
    <link rel="stylesheet" custom.css>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.esm.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/helpers.esm.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js"></script>
    <title>{{ routeticker }}</title>
</head>
<!-- <body class="bg-dark"> -->
<body class="bg-dark">
<div class="container-fluid main-container">
<div class="row justify-content-center">
<div class="col-md-10 content">
<div class=""><a href="/">Weekly Screener</a></div>
       {% block main %}
            <div class="row my-4">
                <div class="col-md-4">
                    <div class="card">
                        <h5 class="card-header">{{ earningsdate }} {{ bmoamc }}</h5>
                        <div class="card-body">
                            <h5 class="card-title"> {{ routeticker }}<br/>
                            {{ companyname }}</h5>
                            <p class="card-text">{{ mw }}</p>
                        </div>
                      </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <h5 class="card-header">Implied Move</h5>
                        <div class="card-body">
                            <h5 class="card-title">&plusmn;{{ impmove }}%</h5>
                            <p class="card-text">{% if underover > 0 %}Undervalued: {{ underover|abs }}%
                                {% else %}Overvalued: {{ underover|abs }}% {% endif %}<br/> 
                                Relative to {{ countreports }} Qtr Avg</p>
                        </div>
                      </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <h5 class="card-header">Historic Move Averages</h5>
                        <div class="card-body">
                          <h5 class="card-title">&plusmn;{{ absactualmoveperc }}% of {{ countreports }} Reports</h5>
                          <p class="card-text">&plusmn;{{ cap12 }}% of {{ cr12 }} Reports</br>
                          &plusmn;{{ cap4 }}% of {{ cr4 }} Reports</p>
                        </div>
                      </div>
                </div>
            </div>
            <div class="row my-4">
                <div class="col-md-4">
                    <div class="card">
                        <h5 class="card-header">Profile</h5>
                        <div class="card-body">
                          <h5 class="card-title">{{ industry }}</h5>
                          <p class="card-text">{{ city }}, {{ state }} {{ zipcode }}<br/>
                            <a href="{{ website|safe }}">{{ website }}</a></p>
                        </div>
                      </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <h5 class="card-header">Volumes</h5>
                        <div class="card-body">
                          <h5 class="card-title">Avg Opt Vol: {{ avg_optvol }}</h5>
                          <p class="card-text">Avg Vol: {{ avg_stockvol }}<br/>
                                Market Cap: {{ market_cap }} Billion</p>
                        </div>
                      </div>
                </div>
                <div class="col-md-4">
                  <div class="card">
                      <h5 class="card-header">Predicted Ranges</h5>
                      <div class="card-body">
                        <p class="card-text">ImpMove: ${{ implieddown }} / ${{ impliedup }}<br/>
                             HistMove: ${{ histdown }} / ${{ histup }}<br/>
                              Breakseven: ${{ bedown }} / ${{ beup }}</p>
                      </div>
                    </div>
              </div>
              </div> <!-- This is the closing div for the second row of cards -->
              <div class="row my-4">
                <div class="col-md-8">
                    <div class="card">
                        <h5 class="card-header">Historic Moves for {{ routeticker }}</h5>
                        <div class="card-body">
                            <p class="card-text">
                                <canvas id="myChart"></canvas>
                            </p>
                        </div>
                      </div>
                </div>
                <div class="col-md-4">
                  <div class="card">
                      <h5 class="card-header">Implied Volatility</h5>
                      <div class="card-body">
                        <h5 class="card-title">Current IV: {{ iv }}</h5>
                        <p class="card-text">IV Crush to: {{ ivcrushto }}</p>
                      </div>
                    </div>
              </div>
          </div>   
              <!-- <div class="col-md-3">
                  <div class="card text-center">
                      <h5 class="card-header"></h5>
                      <div class="card-body">
                          <p class="card-text">
                            <img src="{{ logo|safe }}"></img>
                          </p>
                      </div>
                    </div>
              </div>     
          </div> -->
            {% block table %}
            <div class="table table1">
                <span class="col-lg-auto" style="color: white">{{ ctable|safe }}</span>
            </div>
            {% endblock %}
            <!-- <div class="table table1">
                <span class="col-lg-auto" style="color: white">{{ historicalresult|safe }}</span>
            </div> -->
        </div>
        <div>
            <span class="col-md-3" style="color: white"><a style="color: white" href="{{ oslink|safe }}">{{ oslink }}</a></span>
        </div>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    <script>
        const labels = {{ edatelst|tojson }};   
        const data = {
          labels: labels,
          datasets: [{
            label: 'Post Release Move %',
            backgroundColor: 'rgb(255, 99, 132)',
            borderColor: 'rgb(255, 99, 132)',
            data: {{ mvlst|tojson }},
          }, {
            label: 'Current Implied Move %',
            borderColor: 'rgb(54,162,235)',
            data: [10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10],
            type: 'line',
        }]
        };
        const config = {
          type: 'bar',
          data: data,
          options: {}
        };
      </script>
 <script>
    const myChart = new Chart(
      document.getElementById('myChart'),
      config
    );
  </script>      
{% endblock %}
</div>
</div>
</body>
</body>
</html>